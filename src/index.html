<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#FFF5EB">
  <meta name="description" content="미미 식단 관리 - 고양이 미미의 일일 식단, 배변, 건강 상태 기록">
  <title>미미 식단 관리</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🐱</text></svg>">
</head>
<body>
  <div id="app">
    <!-- 로그인 화면 -->
    <div id="login-screen" class="screen">
      <!-- 발바닥 배경 장식 -->
      <span class="paw-decoration top-left">🐾</span>
      <span class="paw-decoration top-right">🐾</span>
      <span class="paw-decoration bottom-left">🐾</span>
      <span class="paw-decoration bottom-right">🐾</span>

      <div class="login-container">
        <div class="login-header">
          <div class="cat-avatar">
            <span class="cat-face">🐱</span>
            <span class="heart-icon">💕</span>
          </div>
          <h1>미미 식단 관리</h1>
          <p class="subtitle">미미의 건강을 기록해요</p>
        </div>
        <form id="login-form" class="login-form">
          <div class="input-group">
            <label for="password">비밀번호</label>
            <input type="password" id="password" inputmode="numeric" placeholder="비밀번호를 입력하세요" autocomplete="current-password" required>
          </div>
          <div id="login-error-box" class="error-box hidden">
            <span class="error-icon">!</span>
            <span class="error-text" id="login-error"></span>
          </div>
          <button type="submit" id="login-btn" class="btn btn-primary btn-large">
            로그인 <span>→</span>
          </button>
        </form>
        <div class="login-footer-links">
          <a href="#">비밀번호 찾기</a>
          <span class="divider">|</span>
          <a href="#">회원가입</a>
        </div>
      </div>
    </div>

    <!-- 홈 화면 -->
    <div id="home-screen" class="screen hidden">
      <header class="header home-header">
        <div class="header-left">
          <span class="cat-emoji">🐱</span>
          <div class="header-title-block">
            <span>미미 식단 관리</span>
            <span class="sub-text">오늘도 건강하게!</span>
          </div>
        </div>
        <button id="logout-btn" class="btn-icon" title="설정">⚙️</button>
      </header>
      <main class="home-content">
        <!-- 인사 카드 -->
        <div class="greeting-card">
          <div class="greeting-content">
            <p class="greeting-label">Today</p>
            <h2 class="greeting-text">안녕, 집사님! 👋</h2>
            <p class="greeting-subtext">미미가 밥을 기다려요</p>
          </div>
          <div class="greeting-avatar">🐱</div>
        </div>

        <!-- 기록하기 섹션 -->
        <h3 class="record-section-title">기록하기</h3>
        <div class="menu-cards">
          <button id="btn-record" class="menu-btn record-btn">
            <div class="menu-icon-wrapper">🐱</div>
            <div class="menu-text-wrapper">
              <p class="menu-title">미미 상태 기록하기</p>
              <p class="menu-desc">오늘 미미의 상태를 기록해요</p>
            </div>
            <span class="menu-arrow">›</span>
          </button>
          <button id="btn-view" class="menu-btn view-btn">
            <div class="menu-icon-wrapper">📊</div>
            <div class="menu-text-wrapper">
              <p class="menu-title">미미 기록 확인하기</p>
              <p class="menu-desc">미미의 지난 기록을 확인해요</p>
            </div>
            <span class="menu-arrow">›</span>
          </button>
        </div>

        <!-- 푸터 -->
        <div class="home-footer">
          <div class="footer-cat">🐱</div>
          <p class="footer-text">Made with <span class="heart">❤️</span> for Mimi</p>
        </div>
      </main>

      <!-- 하단 네비게이션 -->
      <nav class="bottom-nav">
        <button class="nav-item active">
          <span class="nav-icon">🏠</span>
          <span>홈</span>
        </button>
        <button class="nav-item">
          <span class="nav-icon">📅</span>
          <span>달력</span>
        </button>
        <button class="nav-item">
          <span class="nav-icon">💬</span>
          <span>커뮤니티</span>
        </button>
        <button class="nav-item">
          <span class="nav-icon">👤</span>
          <span>마이</span>
        </button>
      </nav>
    </div>

    <!-- 기록하기 화면 -->
    <div id="record-screen" class="screen hidden">
      <header class="header">
        <button id="record-back-btn" class="btn-icon">←</button>
        <h1 id="record-header-title">기록하기</h1>
        <span class="header-spacer"></span>
      </header>
      <main class="record-content">
        <div class="record-datetime">
          <p class="record-date" id="record-date"></p>
          <p class="current-time" id="current-time"></p>
        </div>

        <!-- 섭취 기록 -->
        <div class="section-header">
          <span class="section-icon">🍴</span>
          <h2 class="section-title">섭취 기록</h2>
        </div>

        <!-- 음수량 -->
        <div class="option-card">
          <div class="option-row">
            <div class="option-label">
              <span class="option-emoji">💧</span>
              <span class="option-text">음수량</span>
            </div>
          </div>
          <div class="radio-group" id="water-group">
            <label class="radio-label" data-value="자급">
              <input type="radio" name="water" value="자급">
              <span class="radio-dot"></span>
              <span class="radio-text">자급 (스스로 마심)</span>
            </label>
            <label class="radio-label" data-value="지급">
              <input type="radio" name="water" value="지급">
              <span class="radio-dot"></span>
              <span class="radio-text">지급 (보호자가 줌)</span>
            </label>
          </div>
        </div>

        <!-- 사료량 -->
        <div class="option-card">
          <div class="option-row">
            <div class="option-label">
              <span class="option-emoji">🍚</span>
              <span class="option-text">사료량</span>
            </div>
            <span class="option-unit">g</span>
          </div>
          <div class="option-row" style="margin-top: 12px;">
            <label class="checkbox-label">
              <input type="checkbox" id="food-enabled">
              <span class="checkbox-box"></span>
              <span class="checkbox-text">사료 기록하기</span>
            </label>
            <div class="stepper-container" id="food-stepper-container">
              <button type="button" class="stepper-btn" id="food-decrease">−</button>
              <span class="stepper-value" id="food-value">40</span>
              <button type="button" class="stepper-btn active-btn" id="food-increase">+</button>
            </div>
          </div>
        </div>

        <!-- 간식 -->
        <div class="option-card">
          <div class="option-row">
            <div class="option-label">
              <span class="option-emoji">🍪</span>
              <span class="option-text">간식</span>
            </div>
          </div>
          <div class="chip-group" id="snack-chips">
            <button type="button" class="chip" data-snack="churu" id="snack-churu-chip">츄르</button>
            <button type="button" class="chip" data-snack="partymix" id="snack-partymix-chip">파티믹스</button>
            <button type="button" class="chip" data-snack="jogong" id="snack-jogong-chip">조공</button>
          </div>
          <!-- 간식 상세 입력 (선택시 표시) -->
          <div class="snack-options hidden" id="snack-details">
            <div class="snack-item hidden" id="partymix-row">
              <span class="checkbox-text">파티믹스</span>
              <div class="stepper-container active" id="partymix-stepper">
                <button type="button" class="stepper-btn" id="partymix-decrease">−</button>
                <span class="stepper-value" id="partymix-value">5</span>
                <span style="color: var(--text-muted); font-size: 0.85rem;">개</span>
                <button type="button" class="stepper-btn active-btn" id="partymix-increase">+</button>
              </div>
            </div>
            <div class="snack-item hidden" id="jogong-row">
              <span class="checkbox-text">조공</span>
              <div class="stepper-container active" id="jogong-stepper">
                <button type="button" class="stepper-btn" id="jogong-decrease">−</button>
                <span class="stepper-value" id="jogong-value">5</span>
                <span style="color: var(--text-muted); font-size: 0.85rem;">개</span>
                <button type="button" class="stepper-btn active-btn" id="jogong-increase">+</button>
              </div>
            </div>
          </div>
          <!-- hidden inputs for form state -->
          <input type="checkbox" id="snack-partymix-enabled" style="display:none;">
          <input type="checkbox" id="snack-jogong-enabled" style="display:none;">
          <input type="checkbox" id="snack-churu-enabled" style="display:none;">
        </div>

        <!-- 배변 기록 -->
        <div class="section-header">
          <span class="section-icon">🚽</span>
          <h2 class="section-title">배변 기록</h2>
        </div>

        <!-- 대변 -->
        <div class="option-card">
          <div class="option-row">
            <div class="option-label">
              <span class="option-emoji">💩</span>
              <span class="option-text">대변 상태</span>
            </div>
          </div>
          <div class="option-row" style="margin-top: 12px;">
            <label class="checkbox-label">
              <input type="checkbox" id="poop-enabled">
              <span class="checkbox-box"></span>
              <span class="checkbox-text">대변 기록하기</span>
            </label>
            <div class="stepper-container" id="poop-stepper-container">
              <button type="button" class="stepper-btn" id="poop-decrease">−</button>
              <span class="stepper-value" id="poop-value">1</span>
              <span style="color: var(--text-muted); font-size: 0.85rem;">개</span>
              <button type="button" class="stepper-btn active-btn" id="poop-increase">+</button>
            </div>
          </div>
        </div>

        <!-- 소변 -->
        <div class="option-card">
          <div class="option-row">
            <div class="option-label">
              <span class="option-emoji">💦</span>
              <span class="option-text">소변 (감자 크기)</span>
            </div>
          </div>
          <div class="option-row" style="margin-top: 12px;">
            <label class="checkbox-label">
              <input type="checkbox" id="urine-enabled">
              <span class="checkbox-box"></span>
              <span class="checkbox-text">소변 기록하기</span>
            </label>
          </div>
          <div class="radio-group horizontal" id="urine-group" style="opacity: 0.5; pointer-events: none;">
            <label class="radio-label" data-value="대">
              <input type="radio" name="urine" value="대">
              <span class="radio-dot"></span>
              <span class="radio-text">대</span>
            </label>
            <label class="radio-label" data-value="중">
              <input type="radio" name="urine" value="중" checked>
              <span class="radio-dot"></span>
              <span class="radio-text">중</span>
            </label>
            <label class="radio-label" data-value="소">
              <input type="radio" name="urine" value="소">
              <span class="radio-dot"></span>
              <span class="radio-text">소</span>
            </label>
          </div>
        </div>

        <!-- 특이사항 -->
        <div class="section-header">
          <span class="section-icon">📝</span>
          <h2 class="section-title">특이사항</h2>
        </div>

        <div class="option-card">
          <div class="memo-grid" id="memo-options">
            <label class="memo-label" data-value="구토를 했어요 🤮">
              <input type="checkbox" value="구토를 했어요 🤮">
              <span class="memo-checkbox"></span>
              <span class="memo-text">구토를 했어요 🤮</span>
            </label>
            <label class="memo-label" data-value="앙탈이 심했어요 😾">
              <input type="checkbox" value="앙탈이 심했어요 😾">
              <span class="memo-checkbox"></span>
              <span class="memo-text">앙탈이 심했어요 😾</span>
            </label>
            <label class="memo-label" data-value="너무 울어요 😿">
              <input type="checkbox" value="너무 울어요 😿">
              <span class="memo-checkbox"></span>
              <span class="memo-text">너무 울어요 😿</span>
            </label>
            <label class="memo-label" data-value="밥을 안 먹어요 🙅">
              <input type="checkbox" value="밥을 안 먹어요 🙅">
              <span class="memo-checkbox"></span>
              <span class="memo-text">밥을 안 먹어요 🙅</span>
            </label>
            <label class="memo-label" data-value="평소보다 활발해요 🏃">
              <input type="checkbox" value="평소보다 활발해요 🏃">
              <span class="memo-checkbox"></span>
              <span class="memo-text">평소보다 활발해요 🏃</span>
            </label>
            <label class="memo-label" data-value="많이 잤어요 😴">
              <input type="checkbox" value="많이 잤어요 😴">
              <span class="memo-checkbox"></span>
              <span class="memo-text">많이 잤어요 😴</span>
            </label>
            <label class="memo-label" data-value="털을 많이 핥아요 🐈">
              <input type="checkbox" value="털을 많이 핥아요 🐈">
              <span class="memo-checkbox"></span>
              <span class="memo-text">털을 많이 핥아요 🐈</span>
            </label>
            <label class="memo-label" data-value="숨어있어요 🙈">
              <input type="checkbox" value="숨어있어요 🙈">
              <span class="memo-checkbox"></span>
              <span class="memo-text">숨어있어요 🙈</span>
            </label>
            <label class="memo-label" data-value="컨디션이 좋아요 ✨">
              <input type="checkbox" value="컨디션이 좋아요 ✨">
              <span class="memo-checkbox"></span>
              <span class="memo-text">컨디션이 좋아요 ✨</span>
            </label>
            <label class="memo-label" data-value="물을 많이 마셔요 💧">
              <input type="checkbox" value="물을 많이 마셔요 💧">
              <span class="memo-checkbox"></span>
              <span class="memo-text">물을 많이 마셔요 💧</span>
            </label>
          </div>
        </div>
      </main>

      <!-- 저장 버튼 영역 -->
      <div class="save-section">
        <div class="save-buttons">
          <button id="cancel-record-btn" class="btn btn-secondary">취소</button>
          <button id="save-record-btn" class="btn btn-primary" disabled>저장</button>
        </div>
      </div>
    </div>

    <!-- 조회하기 화면 -->
    <div id="view-screen" class="screen hidden">
      <header class="header">
        <button id="view-back-btn" class="btn-icon">←</button>
        <h1>미미 기록 통계</h1>
        <div class="greeting-avatar" style="width: 36px; height: 36px; font-size: 1.3rem;">🐱</div>
      </header>
      <main class="view-content">
        <!-- 모드 스위치 -->
        <div class="view-mode-switch">
          <button class="view-mode-btn active" data-mode="daily">
            <span class="mode-icon">📅</span>
            <span class="mode-text">날짜별 보기</span>
          </button>
          <button class="view-mode-btn" data-mode="period">
            <span class="mode-icon">📊</span>
            <span class="mode-text">기간별 통계</span>
          </button>
        </div>

        <!-- 날짜 네비게이션 (날짜별 보기 모드) -->
        <div class="date-navigation" id="date-navigation">
          <button id="date-prev-btn" class="date-nav-btn" title="이전 날짜">←</button>
          <span id="current-date-display" class="date-display">2025.12.18</span>
          <button id="date-next-btn" class="date-nav-btn" title="다음 날짜" disabled>→</button>
        </div>

        <!-- 기간 필터 (기간별 통계 모드) -->
        <div class="period-filter hidden" id="period-filter">
          <button class="period-btn active" data-period="today">오늘</button>
          <button class="period-btn" data-period="3days">3일</button>
          <button class="period-btn" data-period="week">일주일</button>
          <button class="period-btn" data-period="month">한달</button>
        </div>

        <!-- 탭 메뉴 -->
        <div class="tab-menu" id="tab-menu">
          <button class="tab-btn active" data-tab="food">🍚 먹은양</button>
          <button class="tab-btn" data-tab="bathroom">💩 배변</button>
          <button class="tab-btn" data-tab="water">💧 물</button>
          <button class="tab-btn" data-tab="memo">📝 특이사항</button>
        </div>

        <!-- 탭 컨텐츠 -->
        <div class="tab-content" id="tab-content">
          <!-- 먹은 양 탭 -->
          <div id="tab-food" class="tab-panel active">
            <div class="stats-card">
              <div class="stats-card-header">
                <div class="stats-card-title">
                  <span class="stats-emoji">🍚</span>
                  <div>
                    <p class="stats-label">사료 총량</p>
                  </div>
                </div>
              </div>
              <div class="stats-content" id="food-stats">
                <div class="loading">로딩 중...</div>
              </div>
            </div>
          </div>

          <!-- 배변 탭 -->
          <div id="tab-bathroom" class="tab-panel hidden">
            <div class="stats-card">
              <div class="stats-card-header">
                <div class="stats-card-title">
                  <span class="stats-emoji">💩</span>
                  <div>
                    <p class="stats-label">배변 기록</p>
                  </div>
                </div>
              </div>
              <div class="stats-content" id="bathroom-stats">
                <div class="loading">로딩 중...</div>
              </div>
            </div>
          </div>

          <!-- 물 탭 -->
          <div id="tab-water" class="tab-panel hidden">
            <div class="stats-card">
              <div class="stats-card-header">
                <div class="stats-card-title">
                  <span class="stats-emoji">💧</span>
                  <div>
                    <p class="stats-label">물 섭취 기록</p>
                  </div>
                </div>
              </div>
              <div class="stats-content" id="water-stats">
                <div class="loading">로딩 중...</div>
              </div>
            </div>
          </div>

          <!-- 특이사항 탭 -->
          <div id="tab-memo" class="tab-panel hidden">
            <div class="stats-card">
              <div class="stats-card-header">
                <div class="stats-card-title">
                  <span class="stats-emoji">📝</span>
                  <div>
                    <p class="stats-label">특이사항</p>
                  </div>
                </div>
              </div>
              <div class="stats-content" id="memo-stats">
                <div class="loading">로딩 중...</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 상세 기록 보기 -->
        <div class="detail-section">
          <button id="toggle-detail-btn" class="btn btn-secondary btn-large">
            상세 기록 보기
          </button>
          <div id="detail-records" class="detail-records hidden">
            <div class="loading">로딩 중...</div>
          </div>
        </div>
      </main>

      <!-- FAB 버튼 -->
      <button id="fab-add" class="fab">+</button>

      <!-- 하단 네비게이션 -->
      <nav class="bottom-nav">
        <button class="nav-item">
          <span class="nav-icon">🏠</span>
          <span>홈</span>
        </button>
        <button class="nav-item active">
          <span class="nav-icon">📊</span>
          <span>통계</span>
        </button>
        <button class="nav-item">
          <span class="nav-icon">📅</span>
          <span>달력</span>
        </button>
        <button class="nav-item">
          <span class="nav-icon">⚙️</span>
          <span>설정</span>
        </button>
      </nav>
    </div>

    <!-- 토스트 메시지 -->
    <div id="toast" class="toast hidden"></div>

    <!-- 확인 모달 -->
    <div id="confirm-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-icon" id="modal-icon">🐱</div>
        <h3 class="modal-title" id="modal-title">확인</h3>
        <p class="modal-message" id="confirm-message">기록을 저장하시겠습니까?</p>
        <p class="modal-warning hidden" id="modal-warning"></p>
        <div class="modal-buttons">
          <button id="confirm-cancel" class="btn btn-secondary">취소</button>
          <button id="confirm-ok" class="btn btn-primary">확인</button>
        </div>
      </div>
    </div>

    <!-- 삭제 확인 모달 -->
    <div id="delete-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-icon">😿</div>
        <h3 class="modal-title">기록 삭제</h3>
        <p class="modal-message">이 기록을 삭제하시겠습니까?</p>
        <p class="modal-warning">삭제된 기록은 복구할 수 없습니다.</p>
        <div class="modal-buttons">
          <button id="delete-cancel" class="btn btn-secondary">취소</button>
          <button id="delete-ok" class="btn btn-danger">🗑️ 삭제</button>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/api.js"></script>
  <script src="scripts/auth.js"></script>
  <script src="scripts/utils.js"></script>
  <script src="scripts/app.js"></script>
</body>
</html>
